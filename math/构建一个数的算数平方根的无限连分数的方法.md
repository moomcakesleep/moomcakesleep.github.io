# 构建一个实数a的算数平方根的无限连分数的方法

## 连分数

!> 以下摘自[连分数 - OI Wiki](https://oi-wiki.org/math/number-theory/continued-fraction/)

连分数 是实数作为有理数的特定收敛序列的表示。它们在算法竞赛（competitive programming）中很有用，因为它们易于计算，并且可以有效地用于在分母不超过给定值的所有数字中，找到基础实数（underlying real number）的最佳可能有理近似（best possible rational approximation）。

除此之外，连分数与欧几里得算法密切相关，这使得它们在一系列数论问题中非常有用。

### 定义

连分数是一种记号。例如，长为 $4$ 的连分数：
$$[a_0,a_1,a_2,a_3]=a_0+\frac{1}{a_1+\frac{1}{a_2+\frac{1}{a_3}}}$$
只是为了形式上简洁，才记成等号左边的样子。这里的四个变元可以任意取值。

连分数各变元的下标从 $0$ 开始。

### 无限连分数

如果分式无限地写下去，有无限个变元，就得到无限连分数。无限连分数收敛等价于渐进分数收敛。

有定理：

无限连分数，如果各变元均大于等于 1，那么一定收敛。

因为只要各变元为正，无限连分数的偶渐进分数单调递增（都比它小），奇渐进分数单调递减（都比它大）。而在均大于等于 1 时，相邻（奇偶间）两个渐进分数之间距离可以给出估计式，趋于 0，因此收敛。

显然可以看到，连分数关于下标为偶数的变元单调递增，关于下标为奇数的变元单调递减。这无论它有限或无限都成立。

#### 定义

设 $a_0,a_1,a_2, \dots$ 为整数序列，使得 $a_1, a_2, \dots \geq 1$。设 $r_k = [a_0; a_1, \dots, a_k]$。然后表达式
$$r = a_0 + \frac{1}{a_1 + \frac{1}{a_2+\dots}} = \lim\limits_{k \to \infty} r_k$$
称为无理数 r 的 连分数表示，并简短地表示为 r = [a_0;a_1,a_2,\dots]。

注意，对于 $r=[a_0;a_1,\dots]$ 和整数 k，有 $r+k = [a_0+k; a_1, \dots]$。

另一个重要的观察结果是，当 $a_0>0$ 时，
 
$\frac{1}{r}=[0;a_0, a_1, \dots]$；当 $a_1＝0$ 时，
 
$\frac{1}{r} = [a_1; a_2, \dots]$。

## 方法

经过上面的介绍，相信你对连分数以及无限连分数也有了一定的认识，那么回到主题：如何构建一个实数a的算数平方根的无限连分数呢？
1. 构建一个方程$x^2-a=0$，且$\sqrt{a}$是它的正实数根
2. 将这个方程变形为$x^2-1=a-1$的形式
3. 左边使用平方差公式变为$(x-1)(x+1)$，则有$$(x-1)(x+1)=a-1$$
4. 将$(x+1)$移至方程右边，则有$$x-1=\frac{a-1}{x+1}$$
5. 最后将$1$移至方程右边，得到，$$x=1+\frac{a-1}{x+1}$$将右边的x反复迭代，便可得到$$\begin{equation}
  x = 1 + \cfrac{a-1}{1
          + \cfrac{a-1}{1
          + \cfrac{a-1}{ 1 + \cfrac{a-1}{\ddots} } } }
\end{equation}$$
这便是一个实数a的算数平方根的无限连分数形式了